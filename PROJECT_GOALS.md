# AkingSPICE 專案目標說明

## 1. 專案宗旨

### 1.1 核心定位
**單純前端網頁的Javascript電路模擬軟體**
- 使用 JavaScript 作為主要開發語言
- 支援純網頁環境運行
- 為AI開發順暢整合，採用 Node.js 作為雙平台開發環境
- **雙平台執行**：Node.js 與網頁瀏覽器皆可執行

### 1.2 使用者體驗目標
讓使用者可以在網頁上：
- **撰寫控制器程式**：在網頁上編寫控制邏輯
- **即時驗證**：在網頁上執行並驗證控制器功能

### 1.3 技術架構
- **計算方法**：採用顯示計算法 (Explicit Methods)
- **目的**：為後期移植與產生 FPGA 模擬程式碼做準備
- **數值穩定性**：確保計算結果的準確性與穩定性

### 1.4 性能優化策略
考量前端模擬速度限制，規劃多重加速方案：

#### 第一階段：WebGPU 加速
- 利用 GPU 平行運算能力
- 適合大型電路矩陣運算

#### 第二階段：WebAssembly (WASM) 加速  
- 接近原生程式碼執行效率
- 適合複雜數值計算

#### 實施原則
- **不強制選擇**：可建立比較測試
- **可並存開發**：兩種方案都可實作
- **使用者自選**：在使用者端測試環境效能，自動選擇最佳方案

---

## 2. 開發階段規劃 (MVP 優先)

### 階段一：MVP - CPU 顯式模擬 ✅ **最高優先**
- **目標**：使用 CPU 進行顯式模擬計算
- **平台**：網頁與 Node.js 雙平台運作
- **要求**：結果務必正確，建立準確性基準
- **驗證**：完整的測試覆蓋與結果驗證

### 階段二：WebAssembly 加速 🚀
- **目標**：使用 WebAssembly 提升計算效能
- **要求**：準確性優先，誤差控制在可接受範圍
- **驗證**：與 MVP 結果比較，確保數值穩定性

### 階段三：GPU 加速 🚀
- **目標**：使用 WebGPU 進行平行運算加速
- **要求**：準確性優先，誤差控制在可接受範圍
- **驗證**：與前兩階段結果比較

### 階段四：FPGA 程式碼轉換 🎯
- **目標**：將電路模擬轉換為 FPGA 可執行程式碼
- **應用**：硬體加速與嵌入式系統應用

---

## 3. 技術規格

### 3.1 支援平台
- **瀏覽器環境**：Chrome, Firefox, Safari, Edge
- **Node.js 環境**：v16+ 
- **作業系統**：Windows, macOS, Linux

### 3.2 核心技術棧
- **主語言**：JavaScript (ES6+)
- **模組系統**：ES Modules
- **打包工具**：Rollup
- **測試框架**：內建測試系統

### 3.3 計算引擎
- **數值方法**：顯式數值積分
- **矩陣運算**：稀疏矩陣優化
- **記憶體管理**：高效緩存策略

### 3.4 性能目標
- **CPU 模式**：中小型電路 (< 1000 節點) 即時模擬
- **WebAssembly 模式**：2-5x CPU 模式效能提升
- **WebGPU 模式**：10-50x CPU 模式效能提升 (大型電路)

---

## 4. 品質保證

### 4.1 準確性要求
- **數值穩定性**：長時間模擬無發散
- **誤差控制**：相對誤差 < 0.1%
- **結果一致性**：跨平台結果完全一致

### 4.2 測試覆蓋
- **單元測試**：所有核心元件 100% 覆蓋
- **整合測試**：完整電路模擬驗證
- **效能測試**：不同大小電路的效能基準

### 4.3 相容性
- **瀏覽器相容**：主流瀏覽器支援
- **Node.js 相容**：多版本測試
- **作業系統相容**：跨平台驗證

---

## 5. 專案結構

```
src/
├── core/           # 核心計算引擎
├── components/     # 電路元件庫  
├── analysis/       # 分析演算法
├── parser/         # 電路描述解析器
├── webgpu/         # GPU 加速模組 (階段三)
├── wasm/           # WebAssembly 模組 (階段二)
└── ui/             # 使用者界面 (未來)

test/               # 測試檔案
├── unit/           # 單元測試
├── integration/    # 整合測試  
└── performance/    # 效能測試

docs/               # 文件
└── api/            # API 文件
```

---

## 6. 成功指標

### 6.1 功能性指標
- ✅ 基本電路元件模擬正確
- ✅ 複雜電路網路分析準確  
- ✅ 雙平台執行結果一致
- 🎯 使用者可繪製並模擬電路

### 6.2 性能指標
- **CPU 模式**：1000 節點電路 < 1 秒計算時間
- **加速模式**：明顯效能提升且結果準確
- **記憶體使用**：< 100MB (中型電路)

### 6.3 開發體驗
- **測試自動化**：所有修改自動驗證
- **文件完整**：API 與使用說明齊全
- **程式碼品質**：ESLint 規範，可維護性高

---

*最後更新：2025年10月*