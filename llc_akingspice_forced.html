<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLC AkingSPICE å¼·åˆ¶æ¨¡æ“¬</title>
  <style>
    body {
      font-family: 'Microsoft YaHei', Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #74b9ff 0%, #0984e3 50%, #6c5ce7 100%);
      color: white;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      background: rgba(255, 255, 255, 0.1);
      padding: 30px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }

    .card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 25px;
      backdrop-filter: blur(10px);
      margin-bottom: 20px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .control-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .control-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .control-item label {
      font-weight: bold;
      font-size: 14px;
    }

    .control-item input {
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-size: 14px;
    }

    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin: 5px;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: linear-gradient(45deg, #00b894, #00cec9);
      color: white;
    }

    .btn-danger {
      background: linear-gradient(45deg, #e17055, #d63031);
      color: white;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .metric-card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }

    .metric-value {
      font-size: 24px;
      font-weight: bold;
      margin: 10px 0;
      color: #00cec9;
    }

    .metric-label {
      font-size: 12px;
      opacity: 0.8;
    }

    .waveform-canvas {
      width: 100%;
      height: 300px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
    }

    .sampling-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
      margin: 15px 0;
    }

    .sample-point {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 12px;
      text-align: center;
    }

    .sample-value {
      font-size: 16px;
      font-weight: bold;
      color: #fdcb6e;
    }

    .log-area {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      padding: 15px;
      font-family: 'Consolas', monospace;
      font-size: 12px;
      height: 200px;
      overflow-y: auto;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .status-ok {
      color: #00b894;
    }

    .status-error {
      color: #d63031;
    }

    .status-warning {
      color: #fdcb6e;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 0.7;
      }

      50% {
        opacity: 1;
      }
    }

    .running {
      animation: pulse 2s infinite;
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- æ¨™é¡Œ -->
    <div class="header">
      <h1>âš¡ LLCè«§æŒ¯è½‰æ›å™¨ - AkingSPICEå¼·åˆ¶æ¨¡æ“¬</h1>
      <h3>ğŸ”¬ ä½¿ç”¨ExplicitStateSolveré€²è¡ŒçœŸå¯¦é›»è·¯æ¨¡æ“¬</h3>
      <p>ğŸ“Š æ™‚é–“æ­¥é•·ï¼š1Î¼s | é–‹é—œé »ç‡ï¼š100kHz | æ•¸å€¼ç©åˆ†ï¼šé¡¯å¼æ­æ‹‰æ³•</p>
    </div>

    <!-- æ§åˆ¶åƒæ•¸ -->
    <div class="card">
      <h3>ğŸ›ï¸ LLCé›»è·¯åƒæ•¸</h3>
      <div class="control-grid">
        <div class="control-item">
          <label>è¼¸å…¥é›»å£“ Vin (V)</label>
          <input type="number" id="inputVoltage" value="400" min="200" max="800" step="10">
        </div>
        <div class="control-item">
          <label>è«§æŒ¯é›»æ„Ÿ Lr (Î¼H)</label>
          <input type="number" id="resonantL" value="50" min="10" max="200" step="5">
        </div>
        <div class="control-item">
          <label>è«§æŒ¯é›»å®¹ Cr (nF)</label>
          <input type="number" id="resonantC" value="100" min="50" max="500" step="10">
        </div>
        <div class="control-item">
          <label>è² è¼‰é›»é˜» Rload (Î©)</label>
          <input type="number" id="loadResistor" value="4.8" min="1" max="50" step="0.1">
        </div>
        <div class="control-item">
          <label>é–‹é—œé »ç‡ fs (kHz)</label>
          <input type="number" id="switchFreq" value="100" min="50" max="500" step="5">
        </div>
        <div class="control-item">
          <label>æ™‚é–“æ­¥é•· dt (Î¼s)</label>
          <input type="number" id="timeStep" value="1.0" min="0.1" max="5.0" step="0.1">
        </div>
      </div>
      <div style="text-align: center;">
        <button class="btn btn-primary" id="startBtn" onclick="startAkingSPICESimulation()">
          ğŸš€ é–‹å§‹AkingSPICEæ¨¡æ“¬
        </button>
        <button class="btn btn-danger" onclick="stopSimulation()">â¹ï¸ åœæ­¢æ¨¡æ“¬</button>
      </div>
    </div>

    <!-- AkingSPICEç‹€æ…‹ -->
    <div class="card">
      <h3>ğŸ”¬ AkingSPICEæ±‚è§£å™¨ç‹€æ…‹</h3>
      <div class="metrics-grid">
        <div class="metric-card">
          <div class="metric-value" id="solverStatus">æœªå•Ÿå‹•</div>
          <div class="metric-label">æ±‚è§£å™¨ç‹€æ…‹</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="timeStepCount">0</div>
          <div class="metric-label">æ™‚é–“æ­¥æ•¸</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="simulationTime">0.0</div>
          <div class="metric-label">æ¨¡æ“¬æ™‚é–“ (Î¼s)</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="solverPerformance">0</div>
          <div class="metric-label">æ±‚è§£é€Ÿåº¦ (æ­¥/ç§’)</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="resonantFreq">0.0</div>
          <div class="metric-label">è«§æŒ¯é »ç‡ (kHz)</div>
        </div>
        <div class="metric-card">
          <div class="metric-value" id="frequencyRatio">0.0</div>
          <div class="metric-label">é »ç‡æ¯” fs/fr</div>
        </div>
      </div>
    </div>

    <!-- æ³¢å½¢é¡¯ç¤º -->
    <div class="card">
      <h3>ğŸ“ˆ AkingSPICEæ³¢å½¢è¼¸å‡º</h3>
      <canvas id="waveformCanvas" class="waveform-canvas"></canvas>
    </div>

    <!-- å–æ¨£é›»å£“ -->
    <div class="card">
      <h3>ğŸ“ ç¯€é»é›»å£“å–æ¨£ (AkingSPICEå¯¦æ™‚)</h3>
      <div class="sampling-grid">
        <div class="sample-point">
          <div class="sample-label">è«§æŒ¯é›»æ„Ÿé›»æµ</div>
          <div class="sample-value" id="sampleILr">0.0A</div>
        </div>
        <div class="sample-point">
          <div class="sample-label">è«§æŒ¯é›»å®¹é›»å£“</div>
          <div class="sample-value" id="sampleVCr">0.0V</div>
        </div>
        <div class="sample-point">
          <div class="sample-label">ä¸­é–“ç¯€é»N1</div>
          <div class="sample-value" id="sampleVN1">0.0V</div>
        </div>
        <div class="sample-point">
          <div class="sample-label">ä¸­é–“ç¯€é»N2</div>
          <div class="sample-value" id="sampleVN2">0.0V</div>
        </div>
        <div class="sample-point">
          <div class="sample-label">è¼¸å‡ºç¯€é»Vout</div>
          <div class="sample-value" id="sampleVout">0.0V</div>
        </div>
        <div class="sample-point">
          <div class="sample-label">é–‹é—œç‹€æ…‹S1</div>
          <div class="sample-value" id="switchS1">OFF</div>
        </div>
        <div class="sample-point">
          <div class="sample-label">é–‹é—œç‹€æ…‹S2</div>
          <div class="sample-value" id="switchS2">OFF</div>
        </div>
        <div class="sample-point">
          <div class="sample-label">è»Ÿé–‹é—œæ¨¡å¼</div>
          <div class="sample-value" id="softSwitching">æª¢æ¸¬ä¸­</div>
        </div>
      </div>
    </div>

    <!-- ç³»çµ±æ—¥èªŒ -->
    <div class="card">
      <h3>ğŸ“‹ AkingSPICEç³»çµ±æ—¥èªŒ</h3>
      <div id="systemLog" class="log-area"></div>
    </div>
  </div>

  <!-- å¼·åˆ¶è¼‰å…¥AkingSPICE -->
  <script type="module">
    // å¼·åˆ¶å°å…¥AkingSPICEæ¨¡çµ„
    import {
      BaseComponent,
      VoltageSource,
      Resistor,
      Capacitor,
      Inductor,
      ExplicitStateSolver
    } from './lib-dist/AkingSPICE.es.js';

    let akingSpiceSolver = null;
    let llcComponents = [];
    let isRunning = false;
    let animationId = null;
    let canvas, ctx;
    let simulationStartTime = 0;
    let stepCount = 0;
    let waveformData = {
      time: [],
      iLr: [],
      vCr: [],
      vN1: [],
      vN2: [],
      vOut: []
    };

    function logMessage(message, type = 'info') {
      const log = document.getElementById('systemLog');
      const timestamp = new Date().toLocaleTimeString();
      const className = type === 'error' ? 'status-error' :
        type === 'warning' ? 'status-warning' : 'status-ok';
      log.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
      log.scrollTop = log.scrollHeight;
      console.log(`[AkingSPICE] ${message}`);
    }

    async function createLLCCircuit() {
      logMessage('é–‹å§‹å‰µå»ºLLCé›»è·¯æ‹“æ’²...', 'info');

      const vin = parseFloat(document.getElementById('inputVoltage').value);
      const Lr = parseFloat(document.getElementById('resonantL').value) * 1e-6;
      const Cr = parseFloat(document.getElementById('resonantC').value) * 1e-9;
      const Rload = parseFloat(document.getElementById('loadResistor').value);

      // æ¸…ç©ºçµ„ä»¶é™£åˆ—
      llcComponents = [];

      try {
        // å‰µå»ºé›»è·¯çµ„ä»¶ - çœŸå¯¦çš„LLCæ‹“æ’²
        // è¼¸å…¥é›»å£“æº Vin (ç¯€é» 0 åˆ° 1)
        const vinSource = new VoltageSource('Vin', [0, 1], vin);
        llcComponents.push(vinSource);
        logMessage(`âœ“ è¼¸å…¥é›»å£“æº: Vin = ${vin}V`, 'info');

        // è«§æŒ¯é›»æ„Ÿ Lr (ç¯€é» 1 åˆ° 2)
        const resonantInductor = new Inductor('Lr', [1, 2], Lr);
        llcComponents.push(resonantInductor);
        logMessage(`âœ“ è«§æŒ¯é›»æ„Ÿ: Lr = ${(Lr * 1e6).toFixed(1)}Î¼H`, 'info');

        // è«§æŒ¯é›»å®¹ Cr (ç¯€é» 2 åˆ° 3)
        const resonantCapacitor = new Capacitor('Cr', [2, 3], Cr);
        llcComponents.push(resonantCapacitor);
        logMessage(`âœ“ è«§æŒ¯é›»å®¹: Cr = ${(Cr * 1e9).toFixed(1)}nF`, 'info');

        // è² è¼‰é›»é˜» Rload (ç¯€é» 3 åˆ° 0)
        const loadResistor = new Resistor('Rload', [3, 0], Rload);
        llcComponents.push(loadResistor);
        logMessage(`âœ“ è² è¼‰é›»é˜»: Rload = ${Rload}Î©`, 'info');

        // è¨ˆç®—è«§æŒ¯é »ç‡
        const fr = 1 / (2 * Math.PI * Math.sqrt(Lr * Cr));
        const fs = parseFloat(document.getElementById('switchFreq').value) * 1000;
        const k = fs / fr;

        document.getElementById('resonantFreq').textContent = (fr / 1000).toFixed(1);
        document.getElementById('frequencyRatio').textContent = k.toFixed(3);

        logMessage(`âœ“ è«§æŒ¯é »ç‡: fr = ${(fr / 1000).toFixed(1)}kHz`, 'info');
        logMessage(`âœ“ é »ç‡æ¯”: k = fs/fr = ${k.toFixed(3)}`, 'info');

        return true;
      } catch (error) {
        logMessage(`âŒ é›»è·¯å‰µå»ºå¤±æ•—: ${error.message}`, 'error');
        return false;
      }
    }

    async function initializeAkingSPICE() {
      logMessage('åˆå§‹åŒ–AkingSPICE ExplicitStateSolver...', 'info');

      const timeStep = parseFloat(document.getElementById('timeStep').value) * 1e-6; // è½‰æ›ç‚ºç§’

      try {
        akingSpiceSolver = new ExplicitStateSolver();
        await akingSpiceSolver.initialize(llcComponents, timeStep, {
          debug: true,
          maxIterations: 1000,
          tolerance: 1e-9
        });

        document.getElementById('solverStatus').textContent = 'å·²åˆå§‹åŒ–';
        document.getElementById('solverStatus').className = 'metric-value status-ok';

        logMessage(`âœ“ AkingSPICEåˆå§‹åŒ–æˆåŠŸ`, 'info');
        logMessage(`âœ“ æ™‚é–“æ­¥é•·: ${timeStep * 1e6}Î¼s`, 'info');
        logMessage(`âœ“ æ±‚è§£å™¨: ExplicitStateSolver (é¡¯å¼ç‹€æ…‹æ±‚è§£)`, 'info');

        return true;
      } catch (error) {
        document.getElementById('solverStatus').textContent = 'åˆå§‹åŒ–å¤±æ•—';
        document.getElementById('solverStatus').className = 'metric-value status-error';
        logMessage(`âŒ AkingSPICEåˆå§‹åŒ–å¤±æ•—: ${error.message}`, 'error');
        return false;
      }
    }

    async function runAkingSPICEStep() {
      if (!akingSpiceSolver || !isRunning) return;

      try {
        // åŸ·è¡Œä¸€å€‹æ™‚é–“æ­¥çš„AkingSPICEæ±‚è§£
        const results = await akingSpiceSolver.step();

        stepCount++;
        const currentTime = stepCount * parseFloat(document.getElementById('timeStep').value);

        // æ›´æ–°é¡¯ç¤º
        document.getElementById('timeStepCount').textContent = stepCount.toLocaleString();
        document.getElementById('simulationTime').textContent = currentTime.toFixed(1);

        // è¨ˆç®—æ€§èƒ½
        const elapsedTime = (performance.now() - simulationStartTime) / 1000; // ç§’
        const performance_sps = Math.round(stepCount / elapsedTime);
        document.getElementById('solverPerformance').textContent = performance_sps.toLocaleString();

        // æå–æ³¢å½¢æ•¸æ“š
        if (results && results.nodeVoltages) {
          // å‡è¨­ç¯€é»ç·¨è™Ÿï¼š0=GND, 1=Vin+, 2=Lr+, 3=Cr+/Out
          const vN1 = results.nodeVoltages[1] || 0;
          const vN2 = results.nodeVoltages[2] || 0;
          const vOut = results.nodeVoltages[3] || 0;

          // å¾ç‹€æ…‹è®Šé‡ä¸­æå–é›»æ„Ÿé›»æµå’Œé›»å®¹é›»å£“
          const iLr = results.stateVector && results.stateVector[0] !== undefined ? results.stateVector[0] : 0;
          const vCr = results.stateVector && results.stateVector[1] !== undefined ? results.stateVector[1] : 0;

          // å­˜å„²æ³¢å½¢æ•¸æ“š
          waveformData.time.push(currentTime);
          waveformData.iLr.push(iLr);
          waveformData.vCr.push(vCr);
          waveformData.vN1.push(vN1);
          waveformData.vN2.push(vN2);
          waveformData.vOut.push(vOut);

          // é™åˆ¶æ•¸æ“šé•·åº¦ä»¥é¿å…è¨˜æ†¶é«”æº¢å‡º
          const maxDataPoints = 1000;
          if (waveformData.time.length > maxDataPoints) {
            Object.keys(waveformData).forEach(key => {
              waveformData[key] = waveformData[key].slice(-800);
            });
          }

          // æ›´æ–°å–æ¨£é¡¯ç¤º
          document.getElementById('sampleILr').textContent = iLr.toFixed(3) + 'A';
          document.getElementById('sampleVCr').textContent = vCr.toFixed(1) + 'V';
          document.getElementById('sampleVN1').textContent = vN1.toFixed(1) + 'V';
          document.getElementById('sampleVN2').textContent = vN2.toFixed(1) + 'V';
          document.getElementById('sampleVout').textContent = vOut.toFixed(1) + 'V';

          // PWMé–‹é—œç‹€æ…‹ (åŸºæ–¼æ™‚é–“çš„PWM)
          const fs = parseFloat(document.getElementById('switchFreq').value) * 1000;
          const switchPeriod = 1 / fs * 1e6; // Î¼s
          const cycleTime = currentTime % switchPeriod;
          const dutyCycle = 0.45;

          const s1On = cycleTime < (switchPeriod * dutyCycle);
          const s2On = cycleTime > (switchPeriod * (dutyCycle + 0.05)) &&
            cycleTime < (switchPeriod * (1 - dutyCycle));

          document.getElementById('switchS1').textContent = s1On ? 'ON' : 'OFF';
          document.getElementById('switchS2').textContent = s2On ? 'ON' : 'OFF';

          // è»Ÿé–‹é—œæª¢æ¸¬ (ç°¡åŒ–)
          const k = parseFloat(document.getElementById('frequencyRatio').textContent);
          document.getElementById('softSwitching').textContent = k > 0.8 ? 'è»Ÿé–‹é—œ' : 'ç¡¬é–‹é—œ';
        }

        // ç¹ªè£½æ³¢å½¢
        drawWaveforms();

        // æ¯100æ­¥è¨˜éŒ„ä¸€æ¬¡ç‹€æ…‹
        if (stepCount % 100 === 0) {
          logMessage(`æ¨¡æ“¬é€²è¡Œä¸­: ${stepCount}æ­¥, ${currentTime.toFixed(1)}Î¼s, ${performance_sps}æ­¥/ç§’`, 'info');
        }

      } catch (error) {
        logMessage(`âŒ æ¨¡æ“¬æ­¥é©ŸéŒ¯èª¤: ${error.message}`, 'error');
        stopSimulation();
        return;
      }

      // ç¹¼çºŒä¸‹ä¸€æ­¥
      if (isRunning) {
        animationId = requestAnimationFrame(runAkingSPICEStep);
      }
    }

    function drawWaveforms() {
      if (!canvas || !ctx || waveformData.time.length < 2) return;

      const width = canvas.width / window.devicePixelRatio;
      const height = canvas.height / window.devicePixelRatio;

      // æ¸…ç©ºç•«å¸ƒ
      ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
      ctx.fillRect(0, 0, width, height);

      // ç¹ªè£½ç¶²æ ¼
      ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
      ctx.lineWidth = 1;
      for (let i = 0; i <= 10; i++) {
        const x = (i / 10) * width;
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, height);
        ctx.stroke();
      }
      for (let i = 0; i <= 6; i++) {
        const y = (i / 6) * height;
        ctx.beginPath();
        ctx.moveTo(0, y);
        ctx.lineTo(width, y);
        ctx.stroke();
      }

      // ç¹ªè£½æ³¢å½¢
      const colors = ['#00cec9', '#00b894', '#74b9ff'];
      const waveforms = ['iLr', 'vCr', 'vOut'];
      const labels = ['Ir (A)', 'Vcr (V)', 'Vout (V)'];

      waveforms.forEach((waveform, index) => {
        const data = waveformData[waveform];
        if (data.length < 2) return;

        ctx.strokeStyle = colors[index];
        ctx.lineWidth = 2;
        ctx.beginPath();

        const startIdx = Math.max(0, data.length - 200);
        const values = data.slice(startIdx);
        const timeValues = waveformData.time.slice(startIdx);

        const minVal = Math.min(...values);
        const maxVal = Math.max(...values);
        const range = Math.max(maxVal - minVal, 0.1);
        const timeRange = timeValues[timeValues.length - 1] - timeValues[0];

        for (let i = 0; i < values.length; i++) {
          const x = timeRange > 0 ? (timeValues[i] - timeValues[0]) / timeRange * width : 0;
          const normalizedY = (values[i] - minVal) / range;
          const y = height - (normalizedY * height / 3 + (index * height / 3));

          if (i === 0) {
            ctx.moveTo(x, y);
          } else {
            ctx.lineTo(x, y);
          }
        }
        ctx.stroke();

        // æ¨™ç±¤
        ctx.fillStyle = colors[index];
        ctx.font = '12px Arial';
        ctx.fillText(labels[index], 10, 20 + index * 20);
      });
    }

    // å…¨å±€å‡½æ•¸
    window.startAkingSPICESimulation = async function () {
      if (isRunning) {
        logMessage('âš ï¸ æ¨¡æ“¬å·²åœ¨é€²è¡Œä¸­', 'warning');
        return;
      }

      logMessage('é–‹å§‹AkingSPICE LLCæ¨¡æ“¬...', 'info');

      // é‡ç½®æ•¸æ“š
      stepCount = 0;
      waveformData = { time: [], iLr: [], vCr: [], vN1: [], vN2: [], vOut: [] };

      // å‰µå»ºé›»è·¯
      const circuitOk = await createLLCCircuit();
      if (!circuitOk) {
        logMessage('âŒ ç„¡æ³•å‰µå»ºé›»è·¯ï¼Œæ¨¡æ“¬çµ‚æ­¢', 'error');
        return;
      }

      // åˆå§‹åŒ–æ±‚è§£å™¨
      const solverOk = await initializeAkingSPICE();
      if (!solverOk) {
        logMessage('âŒ ç„¡æ³•åˆå§‹åŒ–AkingSPICEï¼Œæ¨¡æ“¬çµ‚æ­¢', 'error');
        return;
      }

      // é–‹å§‹æ¨¡æ“¬
      isRunning = true;
      simulationStartTime = performance.now();
      document.getElementById('solverStatus').textContent = 'é‹è¡Œä¸­';
      document.getElementById('solverStatus').className = 'metric-value running status-ok';
      document.getElementById('startBtn').textContent = 'ğŸ”„ AkingSPICEé‹è¡Œä¸­...';

      logMessage('âœ… AkingSPICEæ¨¡æ“¬å·²å•Ÿå‹•ï¼', 'info');

      // é–‹å§‹åŸ·è¡Œæ­¥é©Ÿ
      runAkingSPICEStep();
    };

    window.stopSimulation = function () {
      if (!isRunning) return;

      isRunning = false;
      if (animationId) {
        cancelAnimationFrame(animationId);
        animationId = null;
      }

      document.getElementById('solverStatus').textContent = 'å·²åœæ­¢';
      document.getElementById('solverStatus').className = 'metric-value status-warning';
      document.getElementById('startBtn').textContent = 'ğŸš€ é–‹å§‹AkingSPICEæ¨¡æ“¬';

      logMessage('â¹ï¸ AkingSPICEæ¨¡æ“¬å·²åœæ­¢', 'warning');
    };

    // åˆå§‹åŒ–ç•«å¸ƒ
    document.addEventListener('DOMContentLoaded', () => {
      canvas = document.getElementById('waveformCanvas');
      ctx = canvas.getContext('2d');

      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width * window.devicePixelRatio;
      canvas.height = rect.height * window.devicePixelRatio;
      ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
      canvas.style.width = rect.width + 'px';
      canvas.style.height = rect.height + 'px';

      logMessage('ğŸ”§ AkingSPICE LLCç³»çµ±å·²è¼‰å…¥å®Œæˆ', 'info');
      logMessage('âš¡ æº–å‚™é€²è¡Œå¼·åˆ¶AkingSPICEæ¨¡æ“¬', 'info');
    });
  </script>
</body>

</html>