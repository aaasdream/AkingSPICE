<!DOCTYPE html>
<html>
<head>
    <title>å¿«é€Ÿé©—è­‰</title>
</head>
<body>
    <h1>å¿«é€Ÿé©—è­‰</h1>
    <div id="output"></div>

    <script src="lib-dist/AkingSPICE.umd.js"></script>
    <script>
        const output = document.getElementById('output');
        
        function log(msg) {
            console.log(msg);
            output.innerHTML += msg + '<br>';
        }
        
        // å»¶é²åŸ·è¡Œï¼Œç¢ºä¿è…³æœ¬å®Œå…¨åŠ è¼‰
        setTimeout(() => {
            try {
                log('ğŸ” é–‹å§‹å¿«é€Ÿé©—è­‰...');
                
                if (!window.AkingSPICE) {
                    log('âŒ AkingSPICEæœªåŠ è¼‰');
                    return;
                }
                
                log('âœ… AkingSPICEå·²åŠ è¼‰');
                
                const { VoltageSource, Resistor, ExplicitStateSolver } = window.AkingSPICE;
                
                // æœ€ç°¡å–®çš„æ¸¬è©¦ï¼š5V + 10Î©
                const v1 = new VoltageSource('V1', ['n1', 'gnd'], 5);
                const r1 = new Resistor('R1', ['n1', 'gnd'], 10);
                
                log(`å…ƒä»¶å‰µå»º: V1=${v1.value}V, R1=${r1.value}Î©`);
                
                const solver = new ExplicitStateSolver([v1, r1]);
                log('æ±‚è§£å™¨å‰µå»ºå®Œæˆ');
                
                // åŸ·è¡Œä¸€æ­¥
                solver.step(1e-6);
                const result = solver.getNodeVoltages();
                
                log(`çµæœ: n1=${result.n1?.toFixed(6) || 'undefined'}V`);
                
                const expected = 5.0;
                const actual = result.n1 || 0;
                const error = Math.abs(actual - expected);
                
                if (error < 0.1) {
                    log(`âœ… æˆåŠŸï¼èª¤å·®=${error.toExponential(3)}`);
                } else {
                    log(`âŒ å¤±æ•—ï¼æœŸæœ›=${expected}Vï¼Œå¯¦éš›=${actual}Vï¼Œèª¤å·®=${error}`);
                }
                
            } catch (error) {
                log('âŒ éŒ¯èª¤: ' + error.message);
                log('Stack: ' + error.stack);
            }
        }, 1000);
    </script>
</body>
</html>